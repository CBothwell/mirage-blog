machine:
  environment:
    PATH: $PATH:/home/ubuntu/.opam/4.01.0/bin
  ruby:
    version: 2.1.1
dependencies:
  cache_directories:
    - .opam
  pre:
    - gem install jekyll
    - if [[ ! -e .opam ]]; then sudo add-apt-repository -y ppa:avsm/ppa; fi
    - if [[ ! -e .opam ]]; then sudo apt-get -y update; fi
    - if [[ ! -e .opam ]]; then sudo apt-get -y install build-essential m4 gcc ocaml ocaml-native-compilers camlp4-extra opam; fi
    - bash bin/build.sh
deployment:
    linode:
      branch: linode
      commands:
        - bash bin/linode-deploy.sh
